# บทที่ 6 คำสั่งอรรถประโยชน์ #

## Amend Commit ##

Amend Commit เป็นการ Commit ซ้ำเข้าไปใน Commit เดิม โดยมีเงือนไขว่า Commit นั้นจะต้องยังไม่ถูก Push ขึ้นเซิฟเวอร์ และทำได้กับเฉพาะ Commit ล่าสุดเท่านั้น เราไม่สามารถสั่งให้มัน Commit เติมเข้าไปใน Commit ระหว่างกลางได้ ประโยชน์ของมันก็เพื่อไม่ให้เปลือง Commit Commit มันจะได้ไม่รกเกินไปนั่นเอง

1. ให้ลองแก้ไขโค้ดแล้ว Commit ไปสัก 1 ครั้ง โดยยังไม่ต้อง Push ไปยังเซิฟเวอร์
    
    ![](images/chapter_6/amend_commit_01.png)     
    
    ถ้ายังไม่ได้ Push โค้ดมันจะต้องมีเครื่องหมายสีแดงๆ พร้อมตัวเลข ตรงปุ่ม Push
    
    ![](images/chapter_6/amend_commit_02.png)     

2. แก้ไขโค้ดอีกทีแล้ว Commit แต่คราวนี้ให้เลือก Commit options... เป็น Amend lastes commit

    ![](images/chapter_6/amend_commit_03.png)     
    
3. จะมีหน้าต่างขึ้นมาว่าจะให้แทนที่คอมเม้นท์เก่าหรือเปล่า ให้ตอบ Yes เสร็จแล้วคลิกปุ่ม Commit เลย

    ![](images/chapter_6/amend_commit_04.png)     
    
4. สังเกตนะครับว่ามีรายการรอ Push อยู่แค่รายการเดียวเท่านั้น ทั้งที่เรา Commit ไปสองครั้ง

    ![](images/chapter_6/amend_commit_05.png)     
  
  
## คำสั่ง git สำหรับ export ##  

การจะใช้ command line เพื่อเขียนคำสั่ง export ให้คลิกที่ปุ่ม Teminal หน้าต่าง command ก้จะแสดงขึ้นมาให้เราใช้งาน

![](images/chapter_6/commandline_tool.png)    


มีอยู่ 2 คำสั่งที่ผมใช้บ่อย ผมใช้เพื่อ export ไฟล์ที่แก้ไขทั้งหมดจากช่วงนี้ถึงช่วงนี้เอาไป ftp ขึ้นโปรดักชั่น

### export แบบ เจาะจง commit ###

### คำสั่ง ###

git diff-tree -r --no-commit-id --name-only --diff-filter=ACMRT $commit_id | xargs tar -rf mytarfile.tar

### คำอธิบาย ###

$commit_id แทนค่าด้วย id ของ commit ที่ต้องการ export

![](images/chapter_6/export_specific_commit_id.png)   


id ของ commit ดูได้จากด้านหลัง commit

![](images/chapter_6/commit_id.png)   


### export แบบช่วงจาก commit นี้ไปถึง commit นี้ ###

### คำสั่ง ###

git diff-tree -r --name-only --diff-filter=ACMRTUXB $commit_id_1 $commit_id_2 | xargs tar -rf mytarfile.tar 

### คำอธิบาย ###

$commit_id_1 แทนค่าด้วย id ของ commit ตั้งต้น
$commit_id_2 แทนค่าด้วย id ของ commit จนถึง

ในกรณีต้องการให้ export ออกเป็นชื่อซิปไฟล์อื่นที่มีความหมาย ก้ให้เปลี่ยนคำว่า mytarfile.tar เป็นชื่อไฟล์ที่ต้องการ

![](images/chapter_6/export_specific_range.png)    


